-----------
-- PLANTILLA --
-----------

<!---
# Plantilla H1
## Plantilla H2
### Plantilla H3
-->
<!--- <img src="https://phoneky.co.uk/thumbs/screensavers/down/original/linux_3rj131p8.gif" />
-->

‚≠êÔ∏è **PLANTILLA** ‚≠êÔ∏è

| üî•PLANTILLA TALBA‚ùóüî• | 
| ------------- |
| *Plantilla* |


LINKS


https://sites.google.com/site/asixm06edt/home/uf2-automatitzacio-i-scripts 
https://gitlab.com/edtasixm06/ipc-2019

--------------------------------------------------------------------------------

# UF2 - Scripts / Programaci√≥ de Sistemes

# IPC Inter Process Comunication

##################################################

# COLOR DE TERMINAL #00FF64 + #000000

## EXAMEN CON PREGUNTAS 20 PREGUNTAS ## 

## HACER UN PROGRAMA EN PYTHON PR√ÅCTICO ## UF2 ES TODO LO QUE HEMOS HECHO DE PYTHON ##

##################################################

## EJERCICIO 26 TELNET MULTI ##

PS CLIENT 

	* Establece una CONEXI√ìN
	
	* Genera un PIPE
	
	* Env√≠a la informaci√≥n
	
	
	* El cliente conecta y hace el PIPE.
	
	* Hace un BUCLE de 
	
		LEER PIPE y 
		
		ENVIAR SOCKET
	
	* Cerrar SOCKET



Llamar y dar toda al estad√≠stica y cuelga.









####################################################################

VERIFICAMOS


25-ps-server-CORREGIDA.py

isx36579183@i11:~/Documents/ipc$ python3 25-ps-server-one2one-CORREGIDA.py 
Engegat el server CAL: 9242
isx36579183@i11:~/Documents/ipc$ 



python3 25-ps-client-one2one.py localhost

isx36579183@i11:~/Documents/ipc$ python3 25-ps-client-one2one.py localhost
Connected by ('127.0.0.1', 55868)
isx36579183@i11:~/Documents/ipc$ 





####################################################################

VEMOS LOS RESULTADOS

ls /tmp/*.log --> Observamos los LOGS


isx36579183@i11:~/Documents/ipc$ ls /tmp/
127.0.0.1-55864-20220201-101801.log
127.0.0.1-55868-20220201-102013.log






####################################################################


MATAMOS EL PROCESO

kill 7061


kill -15 $(pgrep python)

isx36579183@i11:~/Documents/ipc$ kill -15 $(pgrep python)
isx36579183@i11:~/Documents/ipc$ Signal handler called with signal: 15
[('127.0.0.1', 55868)] 1
^C





####################################################################



# TELNET

$ telnet i15

i15 > ls

i15 > pwd


# CLIENT

* El cliente se conecta a...

	* Hace un LS
	
	* Puede hacer tantos ORDENES 
	
		* Tendr√° un BUCLE:
		
			* Introduce una COMANDA
			


### METODOLOGIA

1. Conectar el Servidor

			
while True: (Bucle para hacer √≥rdenes)
---------
	input(ordre) 

	si ordre = exit --> break

	send (ordre)
	
	while True
	
		rebre (ordre) (recv)
		
		print # Recibir y printar por pantalla
		
		
#		Para salir del WHILE TRUE --> Cuando los datos tengan "yat√†" (FI) (EOT) (CHR4)
		
	
-----------

	volver al prinicipio
	
	Si ordre es exit = tancar connexi√≥. La conexi√≥n la CIERRA EL CLIENTE.



# Necesitamos un WALKIE TALKIE

#	Necesitamos hacer un FI (Es un protocolo)

#	Antes de decir, primero dices cuantas cosas dir√°s

#	Un protocolo es algo que hace di√°logo, y dice que ya est√°.

#	Un mecanismo muy utilizado en inform√°tica, calcula cuantos bytes tiene que enviar y luego se ponen a hablar.

#	El cliente har√° LS y repetira y pondr√° FI.




#	Para salir del WHILE TRUE --> Cuando los datos tengan "yat√†" (FI)




## En un programa TELNET se sale con "exit"

## Si la orden es "exit" == break

## Para comunicarse 2 equipos se hace A TRAV√âS DE SOCKET.



### ejemplo ###

* El cliente quiere hacer un LS

	* Hay que hacer un send (ordre) al SERVIDOR




## ESTAMOS HACIENDO UN DI√ÅLOGO
















## Lo sab√≠amos porque cerrabamos, siempre.

## Todo en la misma conexi√≥n.


if not data break # Se cierra la conexi√≥n.







## Pipe envia

## Revisar ECHO

## DAYTIME


####################################################################





# SERVIDOR


* Acepta la conexi√≥n y la MANTIENE ABIERTA

while True:
------

	recv* (Recibir la instrucci√≥n)
	
	popen (Vomita)

	bucle
		--
		read del Popen
		
		send
		-- (#Ejemplo Cal Server / Data Server (Hacer un popen y enviar la informaci√≥n))

	send (chr4) (#Dice que ya est√°)



-------

# Se pone a escuchar la siguiente ORDEN y env√≠a CAMBIO

1. Primero el CLIENTE.

2. Luego el SERVIDOR.

# Hacer el programa.




####################################################################






MAN ASCII



   000   0     00    NUL '\0' (null character)   100   64    40    @
       001   1     01    SOH (start of heading)      101   65    41    A
       002   2     02    STX (start of text)         102   66    42    B
       003   3     03    ETX (end of text)           103   67    43    C
       004   4     04    EOT (end of transmission)   104   68    44    D

EOT

CHR4



####################################################################




## DESPU√âS DE LA PAUSA



Cuando el CLIENTE habla con el SERVIDOR

Cuando uno habla y callar√° cuando quiera.

El que escucha, no tiene ni idea de cuando terminar. O cerrar la comunicaci√≥n o establecer√° un PROTOCOLO.




## EL CLIENTE PIDE 5 cervezas, el medi es la Xarxa. 

### La xarxa tamb√© influeix en les comunicacions, es pensem que si fem un send de 5 cervezas.

### Nos pensamos que recibiremos primero 4 cervezas y luego el FI.

CHR4 (FI)

### La teor√≠a del camarero de las cervezas.


### Medi = Camarero --> Zafata ha puesto 3 cervezas y otra zafata 1 cerveza + quicos


### El orden como llega, no necesariamente llegar√° agrupado. La cuesti√≥n es que llegar√°n pero no sabemos en cuantos viajes lo transportar√°n.

### No lo gestiona el CLIENTE ni el SERVIDOR.






### Si el cliente hace un SEND de 4 objetos y el RECEIVE 4.

#### Alomejor recibe 1 y luego 3.

#### Todo depende de la RED.

#### Recibimos DATOS + el FIN del final.



########### PRACTICA #####################

# La √∫ltima data es un 4, pero no sabremos en que grupos.

# No podemos hacer if data == CHR4.
















########### CLIENTE #########################



##### PRUEBAS #####

1. nc -l 50001

2. python3 26*.py localhost

localhost> ls

....


keshi@KeshiKiD03:~/Documents/ipc$ python3 26-telnet-client.py --port 50001 localhost
localhost> ls
01-head-[CORREGIDA].py

01-head.py
02-argument-[CORREGIDA].py
02-argument.py

03-head-args-[CORREGIDA].py

03-head-args.py

04b-head-choices-[CORREGIDA].py

04b-head-choices.py

04-head-choices-[CORREGIDA].py

04-head-choices.py









## HACE EL SERVIDOR ES F√ÅCIL

## ESCUCHA VOMITA Y HACE EL POPEN Y TERMINA




















####################################################################















####################################################################
